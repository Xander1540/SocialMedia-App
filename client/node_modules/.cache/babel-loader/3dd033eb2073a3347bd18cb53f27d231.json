{"ast":null,"code":"var _jsxFileName = \"C:\\\\Projects\\\\SocialMediaApp\\\\client\\\\src\\\\Pages\\\\Home.js\";\nimport React from 'react';\nimport axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { useNavigate } from 'react-router-dom';\nimport ThumbUpRoundedIcon from '@mui/icons-material/ThumbUpRounded';\nfunction Home() {\n  const [listOfPosts, setListOfPosts] = useState([]);\n  let navigate = useNavigate();\n  useEffect(() => {\n    axios.get(\"http://localhost:3001/posts\").then(response => {\n      setListOfPosts(response.data);\n    });\n  }, []);\n  const likeAPost = postId => {\n    axios.post(\"http://localhost:3001/likes\", {\n      PostId: postId\n    }, {\n      headers: {\n        accessToken: localStorage.getItem(\"accessToken\")\n      }\n    }).then(response => {\n      setListOfPosts(listOfPosts.map(post => {\n        if (post.id === postId) {\n          if (response.data.liked) {\n            return {\n              ...post,\n              Likes: [...post.Likes, 0]\n            };\n          } else {\n            const likesArray = post.Likes;\n            likesArray.pop();\n            return {\n              ...post,\n              Likes: likesArray\n            };\n          }\n        } else {\n          return post;\n        }\n      }));\n    });\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 5\n    }\n  }, listOfPosts.map((value, key) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: key,\n      className: \"post\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 10\n      }\n    }, \" \", value.title, \" \"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"body\",\n      onClick: () => {\n        navigate(`/post/${value.id}`);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 10\n      }\n    }, \" \", value.postText, \" \"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"footer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 10\n      }\n    }, \" \", value.username, /*#__PURE__*/React.createElement(ThumbUpRoundedIcon, {\n      onClick: () => {\n        likeAPost(value.id);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 10\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 11\n      }\n    }, \" \", value.Likes.length)));\n  }));\n}\nexport default Home;","map":{"version":3,"names":["React","axios","useEffect","useState","useNavigate","ThumbUpRoundedIcon","Home","listOfPosts","setListOfPosts","navigate","get","then","response","data","likeAPost","postId","post","PostId","headers","accessToken","localStorage","getItem","map","id","liked","Likes","likesArray","pop","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","value","key","className","title","onClick","postText","username","length"],"sources":["C:/Projects/SocialMediaApp/client/src/Pages/Home.js"],"sourcesContent":["\r\nimport React from 'react';\r\nimport axios from \"axios\";  \r\nimport {useEffect, useState} from \"react\";\r\nimport { useNavigate } from 'react-router-dom';\r\nimport ThumbUpRoundedIcon from '@mui/icons-material/ThumbUpRounded';\r\n\r\nfunction Home() {\r\n\r\n  const [listOfPosts, setListOfPosts] = useState([]);\r\n  let navigate = useNavigate();\r\n\r\n  useEffect(()=>{\r\n    axios.get(\"http://localhost:3001/posts\").then((response)=>{\r\n      setListOfPosts(response.data);\r\n    });\r\n  }, []);\r\n\r\n  const likeAPost = (postId) => {\r\n    axios.post(\"http://localhost:3001/likes\",\r\n      { PostId: postId },\r\n      { headers: { accessToken: localStorage.getItem(\"accessToken\") } }\r\n      ).then((response) => { setListOfPosts(listOfPosts.map((post) => {\r\n        if (post.id === postId) {\r\n          if (response.data.liked) {\r\n            return { ...post, Likes: [...post.Likes, 0] };\r\n          } else {\r\n            const likesArray = post.Likes;\r\n            likesArray.pop();\r\n            return { ...post, Likes: likesArray };\r\n          }\r\n            }else {\r\n              return post;\r\n            }\r\n          })\r\n        );\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {listOfPosts.map((value, key) =>{\r\n       return (\r\n       <div key ={key} className='post'>\r\n         <div className='title'> {value.title} </div>\r\n         <div className='body'onClick={()=>{navigate(`/post/${value.id}`);}}> {value.postText} </div>\r\n         <div className='footer'> {value.username} \r\n         <ThumbUpRoundedIcon onClick={() => { likeAPost(value.id)}}/>\r\n          <label> {value.Likes.length}</label>\r\n          </div>\r\n        </div>\r\n       ); \r\n    })}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Home;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}